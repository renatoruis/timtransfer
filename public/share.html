<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TimTransfer - Baixar arquivos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', system-ui, sans-serif; }
    body { background: #f5f5f7; }
    .glass { background: rgba(255,255,255,0.8); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
    .glass-border { border: 1px solid rgba(0,0,0,0.04); }
    .shadow-soft { box-shadow: 0 2px 16px rgba(0,0,0,0.04), 0 4px 32px rgba(0,0,0,0.03); }
    .shadow-soft-hover:hover { box-shadow: 0 4px 24px rgba(0,0,0,0.06), 0 8px 48px rgba(0,0,0,0.04); }
    .btn-primary { background: #0071e3; color: white; }
    .btn-primary:hover { background: #0077ed; }
    .link-blue { color: #0071e3; }
    .link-blue:hover { color: #0077ed; }
    .pin-input:focus { box-shadow: 0 0 0 2px rgba(0,113,227,0.4); }
  </style>
</head>
<body class="min-h-screen text-[#1d1d1f] flex flex-col">
  <header class="py-6 px-6 max-w-5xl mx-auto w-full flex justify-center">
    <a href="/" class="inline-block">
      <img src="/images/TimTransferLogo.png" alt="TimTransfer — fácil, grátis e seguro" class="h-16" />
    </a>
  </header>

  <main class="flex-1 py-12 px-6 flex flex-col items-center justify-center">
  <div id="passwordStep" class="w-full max-w-[380px] hidden">
    <div class="p-8 rounded-2xl glass glass-border shadow-soft shadow-soft-hover">
      <p id="passwordHint" class="text-[15px] text-[#86868b] text-center mb-2 font-medium"></p>
      <p id="expiresHint" class="text-[13px] text-[#86868b] text-center mb-6"></p>
      <p class="text-[13px] text-[#86868b] mb-4 font-medium">Digite a senha</p>
      <div class="flex justify-center gap-3 mb-5">
        <input type="password" id="pin0" inputmode="numeric" maxlength="1" autocomplete="off"
          class="pin-input w-12 h-12 text-center text-[17px] font-semibold rounded-xl bg-white/60 border border-[#d2d2d7] text-[#1d1d1f] focus:outline-none focus:border-transparent transition-shadow duration-200" />
        <input type="password" id="pin1" inputmode="numeric" maxlength="1" autocomplete="off"
          class="pin-input w-12 h-12 text-center text-[17px] font-semibold rounded-xl bg-white/60 border border-[#d2d2d7] text-[#1d1d1f] focus:outline-none focus:border-transparent transition-shadow duration-200" />
        <input type="password" id="pin2" inputmode="numeric" maxlength="1" autocomplete="off"
          class="pin-input w-12 h-12 text-center text-[17px] font-semibold rounded-xl bg-white/60 border border-[#d2d2d7] text-[#1d1d1f] focus:outline-none focus:border-transparent transition-shadow duration-200" />
        <input type="password" id="pin3" inputmode="numeric" maxlength="1" autocomplete="off"
          class="pin-input w-12 h-12 text-center text-[17px] font-semibold rounded-xl bg-white/60 border border-[#d2d2d7] text-[#1d1d1f] focus:outline-none focus:border-transparent transition-shadow duration-200" />
      </div>
      <p id="passwordError" class="text-[#ff3b30] text-[14px] mb-4 hidden text-center font-medium"></p>
      <button type="button" id="unlockBtn" class="w-full py-3.5 rounded-xl btn-primary text-[15px] font-semibold transition-colors duration-200">
        Acessar
      </button>
    </div>
  </div>

  <div id="content" class="w-full max-w-[380px] hidden">
    <div class="p-8 rounded-2xl glass glass-border shadow-soft shadow-soft-hover">
      <ul id="fileList" class="mb-4 max-h-44 overflow-y-auto space-y-2.5 text-[15px]"></ul>
      <p id="totalSize" class="text-[13px] text-[#86868b] mb-2 font-medium"></p>
      <p id="expiresAt" class="text-[13px] text-[#86868b] mb-6 font-medium"></p>
      <button type="button" id="downloadBtn" class="flex justify-center items-center gap-2 w-full py-3.5 rounded-xl btn-primary text-[15px] font-semibold transition-colors duration-200">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
        Baixar
      </button>
      <p id="downloadSuccess" class="hidden text-center py-4 text-[15px] text-[#34c759] font-medium">
        Download concluído. Os arquivos foram removidos do servidor.
      </p>
    </div>
  </div>

  <div id="loading" class="text-[15px] text-[#86868b] flex items-center gap-3 font-medium">
    <svg class="animate-spin w-5 h-5 text-[#0071e3]" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
    Carregando...
  </div>

  <div id="notFound" class="text-center hidden">
    <div class="p-8 rounded-2xl glass glass-border shadow-soft">
      <p class="text-[15px] text-[#86868b] mb-5 font-medium">Arquivos não encontrados</p>
      <a href="/app" class="inline-block px-6 py-3 rounded-xl btn-primary text-[15px] font-semibold transition-opacity duration-200 hover:opacity-90">Enviar arquivos</a>
    </div>
  </div>
  </main>

  <footer class="mt-auto py-8 px-6 border-t border-[#d2d2d7]/50 bg-[#f5f5f7]">
    <div class="max-w-5xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
      <span class="text-[13px] text-[#86868b]">TimTransfer — gratuito, simples, seguro.</span>
      <div class="flex items-center gap-6">
        <button type="button" id="feedbackBtn" class="text-[14px] text-[#86868b] hover:text-[#0071e3] transition-colors">
          Enviar sugestão
        </button>
        <button type="button" id="coffeeBtn" class="text-[14px] text-[#86868b] hover:text-[#0071e3] transition-colors">
          Me pague um café
        </button>
        <a href="https://github.com/renatoruis/timtransfer" target="_blank" rel="noopener" class="text-[14px] text-[#86868b] hover:text-[#0071e3] transition-colors flex items-center gap-1">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          Dar uma estrela
        </a>
      </div>
    </div>
  </footer>

  <div id="modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 hidden">
    <div class="bg-white rounded-2xl p-8 max-w-sm w-full shadow-xl" onclick="event.stopPropagation()">
      <h3 class="text-[20px] font-semibold text-center mb-2">Me pague um café</h3>
      <p class="text-[14px] text-[#86868b] text-center mb-4">Escaneie o QR code ou copie a chave PIX</p>
      <img src="/images/qrcode-pix.png" alt="QR Code PIX" class="w-48 h-48 mx-auto rounded-lg mb-4" />
      <p class="text-[13px] text-[#86868b] mb-1">Chave PIX</p>
      <p id="pixKey" class="font-mono text-[14px] text-[#1d1d1f] mb-3 break-all select-all">a7f1a823-d3b5-4ab3-b63f-03ffed9459f7</p>
      <button type="button" id="copyPixBtn" class="w-full py-3 rounded-xl bg-[#0071e3] hover:bg-[#0077ed] text-white text-[15px] font-medium mb-3 transition-colors">Copiar chave</button>
      <button type="button" id="closeModal" class="w-full py-3 rounded-xl bg-[#f5f5f7] text-[#1d1d1f] text-[15px] font-medium hover:bg-[#e8e8ed] transition-colors">
        Fechar
      </button>
    </div>
  </div>

  <div id="feedbackModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 hidden">
    <div class="bg-white rounded-2xl p-8 max-w-md w-full shadow-xl max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-[20px] font-semibold text-[#1d1d1f]">Enviar sugestão</h3>
        <button type="button" id="feedbackClose" class="text-[#86868b] hover:text-[#1d1d1f] p-1 rounded-lg transition-colors">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <p class="text-[14px] text-[#86868b] mb-4">Envie uma sugestão, melhoria, crítica ou peça suporte. Resposta apenas se informar e-mail.</p>
      <form id="feedbackForm">
        <div class="mb-4">
          <label class="block text-[13px] font-medium text-[#1d1d1f] mb-2">Tipo</label>
          <select id="feedbackType" class="w-full rounded-xl px-4 py-3 text-[15px] bg-[#f5f5f7] border border-[#d2d2d7] text-[#1d1d1f] focus:outline-none focus:border-[#0071e3]/50">
            <option value="sugestao">Sugestão</option>
            <option value="melhoria">Melhoria</option>
            <option value="critica">Crítica</option>
            <option value="suporte">Suporte</option>
          </select>
        </div>
        <div class="mb-4">
          <label class="block text-[13px] font-medium text-[#1d1d1f] mb-2">E-mail (opcional)</label>
          <input type="email" id="feedbackEmail" class="w-full rounded-xl px-4 py-3 text-[15px] bg-[#f5f5f7] border border-[#d2d2d7] text-[#1d1d1f] focus:outline-none focus:border-[#0071e3]/50" placeholder="seu@email.com">
        </div>
        <div class="mb-4">
          <label class="block text-[13px] font-medium text-[#1d1d1f] mb-2">Mensagem</label>
          <textarea id="feedbackMessage" name="message" rows="4" required class="w-full rounded-xl px-4 py-3 text-[15px] bg-[#f5f5f7] border border-[#d2d2d7] text-[#1d1d1f] focus:outline-none focus:border-[#0071e3]/50 resize-none" placeholder="Descreva sua sugestão, melhoria, crítica ou pedido de suporte..."></textarea>
        </div>
        <p id="feedbackError" class="text-[#ff3b30] text-[14px] mb-3 hidden"></p>
        <p id="feedbackSuccessMsg" class="text-[#34c759] text-[14px] mb-3 hidden">Enviado! Obrigado pelo feedback.</p>
        <div class="flex gap-3">
          <button type="button" id="feedbackCloseBtn" class="flex-1 py-3 rounded-xl bg-[#f5f5f7] text-[#1d1d1f] text-[15px] font-medium hover:bg-[#e8e8ed] transition-colors">Cancelar</button>
          <button type="submit" id="feedbackSubmit" class="flex-1 py-3 rounded-xl bg-[#0071e3] hover:bg-[#0077ed] text-white text-[15px] font-medium transition-colors">Enviar</button>
        </div>
      </form>
    </div>
  </div>

  <script src="/js/share.js"></script>
  <script src="/js/feedback.js"></script>
  <script>
    (function() {
      var modal = document.getElementById('modal');
      var coffeeBtn = document.getElementById('coffeeBtn');
      var closeModal = document.getElementById('closeModal');
      if (coffeeBtn) coffeeBtn.addEventListener('click', function() { modal.classList.remove('hidden'); });
      if (closeModal) closeModal.addEventListener('click', function() { modal.classList.add('hidden'); });
      if (modal) modal.addEventListener('click', function(e) { if (e.target === modal) modal.classList.add('hidden'); });
      document.addEventListener('keydown', function(e) { if (e.key === 'Escape') modal.classList.add('hidden'); });
      var copyPixBtn = document.getElementById('copyPixBtn');
      if (copyPixBtn) copyPixBtn.addEventListener('click', function() {
        navigator.clipboard.writeText('a7f1a823-d3b5-4ab3-b63f-03ffed9459f7');
        copyPixBtn.textContent = 'Copiado!';
        setTimeout(function() { copyPixBtn.textContent = 'Copiar chave'; }, 1500);
      });
    })();
  </script>
</body>
</html>
